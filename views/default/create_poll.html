{{extend 'layout.html'}}

{{block head}}
<script src="{{=URL('static', 'js/vue.js')}}"></script>

<script>

    var add_movie_url = "{{=URL('api', 'add_movie', user_signature=True)}}";
    var add_poll_url = "{{=URL('api', 'add_poll', user_signature=True)}}";
    var search_movies_url = "{{=URL('api', 'search_movies')}}";

</script>
{{end}}

<div class="main-content">


    <div id="vue-div" class="display:none">
        
        <div class="container">
            <div class="jumbotron">
                <h3 class="text-center">Search For Any Movie</h3>
                
<!--                 <form id="searchForm">
                    <input type="text" class="form-control" id="searchText" placeholder="Search Movies...">
                </form> -->

                <!-- search form  -->
                <form action="#" v-on:submit.prevent="search_movies2">
                    <div class="form-group">
                        <input 
                            class="form-control"
                            name="Search movies..."
                            type="text" 
                            v-model="form_title" 
                            placeholder="Just click search because the API won't search for some reason"/>
                    </div>
                    <div class="form-group">
                        <input class="btn btn-primary" type="submit" value="Search" />
                    </div>
                </form>


            </div>
        </div>

        <div v-for="movie in movies" class="card">
            <div class="card-body">
                <h5 class="card-title">${movie.title}</h5>
                <img v-bind:src="movie.poster_image_thumbnail" class="padded"/>

                <p class="card-text">${movie.slug}</p>

                <button class="btn btn-default" 
                    v-on:click="add_movie()">
                    Add to poll
                </button>
                <a href="#" class="btn btn-primary">More info</a>
            </div>
        </div>

    </div>
</div>
<script src="{{=URL('static', 'js/default_create_poll.js')}}"></script>

